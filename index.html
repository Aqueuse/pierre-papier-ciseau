<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pierre Papier Ciseau</title>
    <!-- IntÃ©gration de Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  </head>
  <body class="bg-gray-100 text-gray-800 flex flex-col items-center min-h-screen p-5">
    <h1 class="text-4xl font-bold uppercase tracking-wider text-blue-900 mb-8">Pierre Papier Ciseau</h1>
    <div class="flex justify-center gap-8 mb-12">
      <!-- Tux (pierre) -->
      <div class="bg-white rounded-xl p-5 shadow-md transform transition duration-200 hover:-translate-y-1 hover:shadow-lg cursor-pointer" onclick="play('pierre')">
        <img class="w-20 h-20 rounded" src="https://media.licdn.com/dms/image/v2/C5603AQG1jKKKthw01g/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1639597634504?e=1745452800&v=beta&t=att-6jOiy27V93lwsVxJvr9Jel0dIRSJzvhHdBR7CdM" alt="Tux">
      </div>
      <!-- GNU (papier) -->
      <div class="bg-white rounded-xl p-5 shadow-md transform transition duration-200 hover:-translate-y-1 hover:shadow-lg cursor-pointer" onclick="play('papier')">
        <img class="w-20 h-20 rounded" src="https://cdn-icons-png.freepik.com/256/9390/9390891.png?semt=ais_hybrid" alt="GNU">
      </div>
      <!-- Beastie (ciseau) -->
      <div class="bg-gradient-to-br from-cyan-100 to-blue-100 rounded-xl p-4 shadow-md transform transition duration-200 hover:-translate-y-1 hover:shadow-lg cursor-pointer" onclick="play('ciseau')">
        <div class="grid grid-cols-3 gap-2 mb-2">
          <span class="text-xl animate-pulse">ðŸ’§</span>
          <span class="text-xl animate-pulse">ðŸ’§</span>
          <span class="text-xl animate-pulse">ðŸ’§</span>
          <span class="text-xl animate-pulse">ðŸ’§</span>
          <span class="text-xl animate-pulse">ðŸ’§</span>
          <span class="text-xl animate-pulse">ðŸ’§</span>
        </div>
      </div>
    </div>

    <!-- Conteneur du compte Ã  rebours (initialement cachÃ©) -->
    <div id="countdown" class="flex justify-center items-center h-32 my-8 hidden"></div>
    <!-- RÃ©sultat du jeu -->
    <div id="result" class="text-2xl bg-white rounded-xl p-4 shadow-md text-blue-900 mb-8"></div>
    <!-- Statistiques -->
    <div id="stats" class="bg-white rounded-xl p-4 shadow-md text-sm text-gray-700 mb-8"></div>

    <!-- Bouton et conteneur pour le gif de Capybara -->
    <button onclick="showRandomGif()" class="mt-8 px-6 py-3 rounded bg-blue-500 text-white font-medium shadow-md transition transform hover:-translate-y-1 hover:shadow-lg">
      ðŸŽ² Voir un Capybara
    </button>
    <div class="mt-8 p-4 bg-white rounded-xl shadow-md max-w-xs">
      <img id="capybaraGif" class="w-full rounded" src="" alt="Capybara" />
    </div>

    <script>
      // --- Fonction d'appel Ã  l'API Capybara ---
      async function fetchCapybaraGif() {
        try {
          const response = await fetch('https://api.capy.lol/v1/capybara');
          const data = await response.json();
          // Supposons que la rÃ©ponse soit un objet contenant la clÃ© "url"
          return data.url;
        } catch (error) {
          console.error('Erreur lors du fetch de l\'API Capybara:', error);
          return null;
        }
      }

      // Affichage du gif de Capybara via l'API ou en fallback
      async function showRandomGif() {
        const gifUrl = await fetchCapybaraGif();
        if (gifUrl) {
          document.getElementById("capybaraGif").src = gifUrl;
        } else {
          const gifs = [
            "https://i.chzbgr.com/full/9324013056/h3EB8D65F/a-group-of-capybaras-are-squeezed-into-an-outdoor-bath-tub",
            "https://media.tenor.com/oDB9EAV1ucoAAAAM/dancing-capybara.gif",
            "https://media.tenor.com/2UVcaTGegxoAAAAM/%D0%BA%D0%B0%D0%BF%D0%B8%D0%B1%D0%B0%D1%80%D0%B0.gif",
            "https://sweezy-cursors.com/wp-content/uploads/cursor/capybara-dancing-animated/capybara-dancing-animated-custom-cursor.gif"
          ];
          const randomIndex = Math.floor(Math.random() * gifs.length);
          document.getElementById("capybaraGif").src = gifs[randomIndex];
        }
      }

      // Afficher un premier gif au chargement
      showRandomGif();

      // --- Gestion des statistiques du jeu ---
      let stats = {
        wins: 0,
        losses: 0,
        draws: 0,
        pierre: 0,
        papier: 0,
        ciseau: 0
      };

      function updateStatsDisplay() {
        document.getElementById("stats").innerText =
          "GagnÃ©s: " + stats.wins +
          " - Perdus: " + stats.losses +
          " - Ã‰galitÃ©s: " + stats.draws +
          " | Pierre: " + stats.pierre +
          " - Papier: " + stats.papier +
          " - Ciseau: " + stats.ciseau;
      }

      // --- Fonction de jeu ---
      function play(userChoice) {
        const countdownElement = document.getElementById("countdown");
        // VÃ©rifier que le compte Ã  rebours n'est pas dÃ©jÃ  en cours
        if (!countdownElement.classList.contains('hidden')) return;

        // Afficher le compte Ã  rebours
        countdownElement.classList.remove("hidden");
        countdownElement.innerHTML = '<img class="w-24" src="https://static8.depositphotos.com/1338574/829/i/450/depositphotos_8292990-stock-photo-the-number-3-in-gold.jpg" alt="3"/>';
        
        setTimeout(() => {
          countdownElement.innerHTML = '<img class="w-24" src="https://t3.ftcdn.net/jpg/00/25/85/36/360_F_25853657_TZaY3PRevrRfVLhVwACDw1YxdmGQLXhf.jpg" alt="2"/>';
        }, 1000);
        
        setTimeout(() => {
          countdownElement.innerHTML = '<img class="w-24" src="https://png.pngtree.com/png-clipart/20200309/ourmid/pngtree-gold-number-1-png-image_2158836.jpg" alt="1"/>';
        }, 2000);
        
        setTimeout(() => {
          // Masquer le compte Ã  rebours
          countdownElement.classList.add("hidden");

          // DÃ©terminer le choix de l'ordinateur
          const choices = ["pierre", "papier", "ciseau"];
          const computerChoice = choices[Math.floor(Math.random() * choices.length)];
          stats[userChoice]++;
          let result = "";
          if (userChoice === computerChoice) {
            result = "Ã‰galitÃ© !";
            stats.draws++;
          } else if (
            (userChoice === "pierre" && computerChoice === "ciseau") ||
            (userChoice === "papier" && computerChoice === "pierre") ||
            (userChoice === "ciseau" && computerChoice === "papier")
          ) {
            result = "Vous gagnez !";
            stats.wins++;
          } else {
            result = "Vous perdez !";
            stats.losses++;
          }
          document.getElementById("result").innerText =
            "Vous avez choisi " + userChoice +
            ", l'ordinateur a choisi " + computerChoice +
            ". " + result;
          updateStatsDisplay();
        }, 3000);
      }
    </script>
  </body>
</html>
